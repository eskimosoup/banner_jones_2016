function initialize(){if(document.getElementById("map-canvas")&&(locations=$("#map-canvas").data("locations"))){var e={center:new google.maps.LatLng(53.743317,-.331004),zoom:18,scrollwheel:!1};map=new google.maps.Map(document.getElementById("map-canvas"),e);var n=[];$.each(locations,function(e,a){var o=new google.maps.LatLng(a.latitude,a.longitude);n[e]=o;var t='<div class="offices-info-window">';null!=a.building_name&&(t+="<strong>"+a.building_name+"</strong><br />"),null!=a.address_line_1&&(t+=a.address_line_1+"<br />"),null!=a.address_line_2&&(t+=a.address_line_2+"<br />"),null!=a.postcode&&(t+=a.postcode+"<br />"),n.length>1&&(t+='<a href="/offices/'+a.slug+'" title="View more detail" class="offices-view-more">Find out more</a>'),t+="</div>";var s=new google.maps.InfoWindow({content:t}),l="http://bannerjones.ludo5.co.uk/assets/components/icons/map/marker-0cdafba7c6861643c2318d4b7d3b07e969f52243f6605aad98df16a0efeb3108.png",i=new google.maps.Marker({position:o,map:map,icon:l,title:a.street,zIndex:e});google.maps.event.addListener(i,"click",function(){closeInfoWindow(),null!=lastMarker&&$(".office-"+lastMarker).removeClass("active"),lastMarker=markers.indexOf(i),$(".office-"+lastMarker).toggleClass("active"),map.panTo(i.getPosition()),window.setTimeout(function(){map.setZoom(18),s.open(map,i)},1e3)}),google.maps.event.addListener(map,"click",function(){this.setOptions({scrollwheel:!0})}),google.maps.event.addListener(s,"closeclick",function(){n.length>1&&map.fitBounds(latlngbounds),$(".office-"+lastMarker).toggleClass("active")}),infoWindows.push(s),markers.push(i)}),latlngbounds=new google.maps.LatLngBounds,$.each(n,function(e,n){latlngbounds.extend(n)}),map.setCenter(latlngbounds.getCenter()),n.length>1&&map.fitBounds(latlngbounds)}}function closeInfoWindow(){null!=lastMarker&&infoWindows[lastMarker].close()}function loadScript(){var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMJ0P4rD0Fv4cGXxQdd-xAxIlJnWWMESw&callback=initialize",e.async="async",e.defer="defer",document.body.appendChild(e)}function locationClick(e){google.maps.event.trigger(markers[e],"click")}var map,locations,latlngbounds,lastMarker,markers=[],infoWindows=[];window.onload=loadScript;