<% content_for :javascript do %>
  <script>
    const digitRegex = /^-?(\d+\.?\d*)$|(\d*\.?\d+)$/

    $(document).on('focusin', '.conveyancing-landing-hero-form__input', function() {
      $(this)
            .parent()
            .find('.conveyancing-landing-hero-form__options')
            .css('opacity', 1);
    });

    function validateForm() {
      var validateForm = $('.conveyancing-landing-hero-form .conveyancing-landing-hero-form__input--valid').length;
      if (validateForm) {
        $('.conveyancing-landing-hero-form__submit').removeClass('conveyancing-landing-hero-form__submit--disabled');
      } else {
        $('.conveyancing-landing-hero-form__submit').addClass('conveyancing-landing-hero-form__submit--disabled');
      }
    }

    $(document).on('keyup', '.conveyancing-landing-hero-form__input', function() {
      var input = $(this).val();

      if(digitRegex.test(input)) {
        $(this)
          .parent()
          .addClass('conveyancing-landing-hero-form__input--valid');
      } else {
        $(this)
          .parent()
          .removeClass('conveyancing-landing-hero-form__input--valid');
      }

      validateForm();
    });
  </script>
<% end %>



<section class="conveyancing-landing-hero">
  <div class="conveyancing-landing-hero__content">
    <div class="conveyancing-landing-hero__content-inner">
      <h1 class="conveyancing-landing-hero__title">
        <%= @location.title %>
      </h1>

      <%= raw @location.details %>


      <div class="conveyancing-landing-hero-form">
        <%= render partial: "conveyancing_quotes/sale_and_purchases/form",
                  locals: {
                    conveyancing_quote_sale_and_purchase:
                    @conveyancing_quote_sale_and_purchase
                  } %>
      </div>
    </div>
  </div>

  <%= image_srcset 'layout/conveyancing-calculator/hero-banner.jpg',
                    {
                      'layout/conveyancing-calculator/hero-banner@2x.jpg': '2x',
                      'layout/conveyancing-calculator/hero-banner@3x.jpg': '3x',
                    },
                    class: 'conveyancing-landing-hero__image' %>
</section>

<p>
  Need a remortgage or transfer of equity?<br />
  Call: <%= render 'shared/calltracks_phone', phone: global_site_settings['Phone'] %>
</p>
